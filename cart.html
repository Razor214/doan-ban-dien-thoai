<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Giá» hÃ ng - SaiGonPhone</title>
  <link rel="stylesheet" href="assets/css/cart.css">
</head>

<body>
  <!-- HEADER GIá»NG NHÆ¯ TRANG CHá»¦ -->
  <header>
    <div class="logo">
      <img src="assets/img/logo.png" alt="SaiGonPhone Logo" />
      <h1>SaiGonPhone</h1>
    </div>

    <nav class="navbar" id="navbar">
      <a href="index.html" class="bar_right">Trang Chá»§</a>

      <!-- Hiá»ƒn thá»‹ khi chÆ°a Ä‘Äƒng nháº­p -->
      <div id="guest-links" class="navbar-links">
        <a href="user.html?tab=login" class="bar_right">ÄÄƒng nháº­p</a>
        <a href="user.html?tab=register">ÄÄƒng kÃ½</a>
      </div>

      <!-- Hiá»ƒn thá»‹ khi Ä‘Ã£ Ä‘Äƒng nháº­p -->
      <div id="user-links" style="display: none" class="navbar-links">
        <div class="user-dropdown">
          <a href="user.html?tab=profile" class="user-profile-link">
            Xin chÃ o, <span id="user-name"></span>
            <span class="admin-badge" id="admin-badge" style="display: none">Admin</span>
          </a>
          <div class="dropdown-content">
            <a href="index.html" class="icon-home">Vá» trang chá»§</a>
            <a href="user.html?tab=profile" class="icon-profile">Há»“ sÆ¡ cÃ¡ nhÃ¢n</a>
            <a href="cart.html" class="icon-cart">ğŸ›’ Giá» hÃ ng</a>
            <a href="admin.html" class="icon-admin admin-menu-item" id="admin-menu-link" style="display: none">
              Quáº£n Trá»‹ ViÃªn
            </a>
            <a href="#" onclick="logoutFromCart(); return false;" class="icon-logout">ÄÄƒng xuáº¥t</a>
          </div>
        </div>
      </div>
    </nav>
  </header>

  <main>
    <div class="cart-header">
      <h2>ğŸ›’ Giá» hÃ ng cá»§a báº¡n</h2>
      <button class="orders-btn" id="showOrders">ğŸ“¦ ÄÆ¡n Ä‘Ã£ mua</button>
    </div>

    <!-- Danh sÃ¡ch sáº£n pháº©m -->
    <section class="product-list">
      <div class="product" data-id="1" data-name="iPhone 15 Pro" data-price="32000000">
        <img src="assets/img/iphone.jpg" alt="iPhone 15 Pro" onerror="this.src='https://via.placeholder.com/200'">
        <h3>iPhone 15 Pro</h3>
        <p>GiÃ¡: 32.000.000â‚«</p>
        <button class="btn-add">ThÃªm vÃ o giá»</button>
      </div>
      <div class="product" data-id="2" data-name="Samsung Galaxy S24" data-price="25000000">
        <img src="assets/img/samsung.jpg" alt="Samsung Galaxy S24" onerror="this.src='https://via.placeholder.com/200'">
        <h3>Samsung Galaxy S24</h3>
        <p>GiÃ¡: 25.000.000â‚«</p>
        <button class="btn-add">ThÃªm vÃ o giá»</button>
      </div>
      <div class="product" data-id="3" data-name="Xiaomi 14 Ultra" data-price="20000000">
        <img src="assets/img/xiaomi.jpg" alt="Xiaomi 14 Ultra" onerror="this.src='https://via.placeholder.com/200'">
        <h3>Xiaomi 14 Ultra</h3>
        <p>GiÃ¡: 20.000.000â‚«</p>
        <button class="btn-add">ThÃªm vÃ o giá»</button>
      </div>
    </section>

    <!-- Giá» hÃ ng -->
    <section class="cart-section">
      <table id="cartTable">
        <thead>
          <tr>
            <th>TÃªn sáº£n pháº©m</th>
            <th>GiÃ¡</th>
            <th>-</th>
            <th>Sá»‘ lÆ°á»£ng</th>
            <th>+</th>
            <th>Tá»•ng</th>
            <th>XÃ³a</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>

      <div class="cart-summary">
        <p><strong>Tá»•ng cá»™ng:</strong> <span id="totalPrice">0â‚«</span></p>
      </div>
      
      <!-- Äá»‹a chá»‰ nháº­n hÃ ng -->
      <div class="address-section">
        <h3>Äá»‹a chá»‰ nháº­n hÃ ng</h3>

        <label for="savedAddress">Chá»n Ä‘á»‹a chá»‰:</label>
        <select id="savedAddress"></select>

        <label for="newName">Há» vÃ  tÃªn:</label>
        <input type="text" id="newName" placeholder="Nháº­p há» tÃªn">

        <label for="newPhone">Sá»‘ Ä‘iá»‡n thoáº¡i:</label>
        <input type="text" id="newPhone" placeholder="Nháº­p sá»‘ Ä‘iá»‡n thoáº¡i">

        <label for="newAddress">Äá»‹a chá»‰:</label>
        <input type="text" id="newAddress" placeholder="Nháº­p Ä‘á»‹a chá»‰">
      </div>
      
      <div class="address-section payment-box">
        <h3>PhÆ°Æ¡ng thá»©c thanh toÃ¡n</h3>
        <div class="payment-section">
          <label for="paymentMethod">PhÆ°Æ¡ng thá»©c thanh toÃ¡n:</label>
          <select id="paymentMethod">
            <option value="cash">ğŸ’µ Thanh toÃ¡n tiá»n máº·t khi nháº­n hÃ ng</option>
            <option value="transfer">ğŸ’³ Chuyá»ƒn khoáº£n ngÃ¢n hÃ ng</option>
          </select>

          <!-- Khá»‘i hiá»ƒn thá»‹ thÃ´ng tin ngÃ¢n hÃ ng -->
          <div id="bankInfo">
            <p><strong>ğŸ¦ ThÃ´ng tin chuyá»ƒn khoáº£n:</strong></p>
            <label for="bankSelect">Chá»n ngÃ¢n hÃ ng:</label>
            <select id="bankSelect">
              <option value="agribank">Agribank</option>
              <option value="vietcombank">Vietcombank</option>
              <option value="bidv">BIDV</option>
              <option value="techcombank">Techcombank</option>
              <option value="mbbank">MB Bank</option>
            </select>
            <div id="bankDetails" style="margin-top:10px;">
              <p><strong>NgÃ¢n hÃ ng Agribank</strong></p>
              <p>Sá»‘ TK: <b>123456789</b></p>
              <p>Chá»§ TK: <b>CÃ´ng ty SaiGonPhone</b></p>
            </div>
          </div>
          <button class="btn btn-checkout">Äáº·t hÃ ng</button>
        </div>
      </div>

      <a href="index.html" class="btn-back">â¬… Tiáº¿p tá»¥c Ä‘áº·t hÃ ng</a>
    </section>
  </main>

  <footer>Â© 2025 SaiGonPhone | Thiáº¿t káº¿ bá»Ÿi NhÃ³m 6 â€“ Khoa CNTT, Äáº¡i há»c SÃ i GÃ²n</footer>

  <!-- Modal -->
  <div class="modal" id="ordersModal">
    <div class="modal-content">
      <button class="close-btn" id="closeModal">ÄÃ³ng</button>
      <button class="btn btn-remove" id="clearAllOrdersBtn">Há»§y táº¥t cáº£ Ä‘Æ¡n hÃ ng</button>
      <h2>ğŸ“¦ ÄÆ¡n hÃ ng Ä‘Ã£ mua</h2>
      <div id="ordersList"></div>
    </div>
  </div>

  <script>
    // Xá»­ lÃ½ Ä‘Äƒng nháº­p/Ä‘Äƒng xuáº¥t trÃªn trang cart
    document.addEventListener("DOMContentLoaded", function () {
      const userData = localStorage.getItem("currentUser") || localStorage.getItem("CurrentUser");
      const currentUser = userData ? JSON.parse(userData) : null;

      const guestLinks = document.getElementById("guest-links");
      const userLinks = document.getElementById("user-links");
      const adminBadge = document.getElementById("admin-badge");
      const adminMenuLink = document.getElementById("admin-menu-link");
      const userNameSpan = document.getElementById("user-name");

      if (currentUser && currentUser.username) {
        guestLinks.style.display = "none";
        userLinks.style.display = "flex";
        const userName = currentUser.fullName || currentUser.username;
        userNameSpan.textContent = userName;

        const isAdmin = currentUser.role && currentUser.role.toLowerCase() === "admin";
        if (isAdmin) {
          adminBadge.style.display = "inline-block";
          adminMenuLink.style.display = "flex";
        } else {
          adminBadge.style.display = "none";
          adminMenuLink.style.display = "none";
        }
      } else {
        guestLinks.style.display = "flex";
        userLinks.style.display = "none";
      }
    });

    function logoutFromCart() {
      if (confirm("Báº¡n cÃ³ cháº¯c muá»‘n Ä‘Äƒng xuáº¥t?")) {
        localStorage.removeItem("CurrentUser");
        localStorage.removeItem("currentUser");
        window.location.href = "index.html";
      }
      return false;
    }
  </script>
  <script src="assets/js/cart.js"></script>
  <script src="assets/js/cartinner.js"></script>
</body>

</html>